<!DOCTYPE html>
<html lang="en" class="h-100">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="" />
		<meta name="generator" content="" />
		<title>NAVIGATOR TOOL F1</title>
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous"/>
		<link href="../css/multiselect.css" rel="stylesheet"/>
		<link href="../css/product.css" rel="stylesheet" />
	</head>
	<body class="d-flex flex-column h-100">
		<navbar></navbar>
		<main class="flex-shrink-0">
			<div class="container-fluid">
				<div class="pt-3 text-center">
					<h2>F1 (nutrients)</h2>
					<p>This module allows to get daily nutrients balance and recommended fertilization</p>
				</div>
				<form class="needs-validation" novalidate>
					<div class="card">
						<h5 class="card-header bg-secondary text-white">Soil</h5>
						<div class="card-body">
							<div class="row">
								<div class="col-sm-3">
									<label for="soil_texture" class="form-label">Texture</label>
									<select required class="form-select" id="soil_texture" name="input[soil_texture]"></select>										
								</div>
								<div class="col-sm-2">
									<label for="depth_s" class="form-label">Depth (m)</label>
									<input required type="number" class="form-control" id="depth_s" name="input[depth_s]" min="0" step="0.01" value="0.3" />
								</div>
								<div class="col-sm-1">
									<label for="pH" class="form-label">pH</label>
									<input required type="number" class="form-control" id="pH" name="input[pH]" value="7" step="0.1" />
								</div>
								<div class="col-sm-2">
									<label for="stony" class="form-label">Stony (ratio)</label>
									<input required type="number" class="form-control" id="stony" name="input[stony]" value="0.15" />
								</div>
								<div class="col-sm-2">
									<label for="CEC" class="form-label">CEC (meq/kg)</label>
									<input required type="number" class="form-control" id="CEC" name="input[CEC]" min="0" step="0.01" />
								</div>
								<div class="col-sm-2">
									<label for="SOM" class="form-label">SOM (%)</label>
									<input required type="number" class="form-control" id="SOM" name="input[SOM]" min="0" max="100" step="0.1" value="1.5" />
								</div>
							</div>
							<div class="row mt-2">
								<div class="col-sm-3">
									<label for="NO3" class="form-label">Nitric N NO3- (ppm)</label>
									<input type="number" class="form-control" id="NO3" name="input[NO3]" />
								</div>
								<div class="col-sm-3">
									<label for="NH4" class="form-label">Ammoniacal N NH4+ (ppm)</label>
									<input type="number" class="form-control" id="NH4" name="input[NH4]" />
								</div>
								<div class="col-sm-2">
									<label for="N_NH4" class="form-label">&#916;(N - NH4)</label>
									<input required type="number" class="form-control" id="N_NH4" name="input[N_NH4]" value="0.2" step="0.01"/>
								</div>
								<div class="col-sm-2">
									<label for="Nc_s_initial" class="form-label">N initial</label>
									<input required type="number" class="form-control" id="Nc_s_initial" name="input[Nc_s_initial]" min="0" value="30" step="0.1" />
								</div>
								<div class="col-sm-2">
									<label  class="form-label">&nbsp;</label>
									<select required class="form-select" name="input[Nc_s_initial_unit]">
										<option value="ppm">ppm</option>
										<option selected value="kg_ha">kg N/ha</option>
										<option value="pct">%</option>
										<option value="meq_100">meq NO3-/100g</option>
										<option value="meq_kg">meq NO3-/kg</option>
										<option value="meq_l">meq NO3-/l</option>
									</select>
								</div>
							</div>
							<div class="row mt-2">
								<div class="col-sm-4">
									<label for="Pc_method" class="form-label">Pc method</label>
									<select required class="form-select" id="Pc_method" name="input[Pc_method]">
										<option value="olsen">Olsen</option>
										<option value="ammoniumLactate">Ammonium lactate</option>
										<option value="mehlichIII">Mehlich III</option>
										<option value="bray">Bray</option>
										<option value="amoniumAcetate+EDTA">Ammonium acetate + EDTA</option>
										<option value="calciumLactate">Calcium lactate</option>
										<option value="calciumLactateAcetate">Calcium lactate acetate</option>
										<option value="paperStrip">Paper strip</option>
										<option value="acidAmmoniumAcetate">Acid ammonium acetate</option>
										<option value="H2O">H2O</option>
										<option value="saturatedWater">saturated water</option>
										<option value="CaCl2">Ca Cl2</option> 
									</select>
								</div>
								<div class="col-sm-2">
									<label for="Pc_s" class="form-label">P</label>
									<input required type="number" class="form-control" id="Pc_s" name="input[Pc_s]" min="0" step="0.1" />
								</div>
								<div class="col-sm-2">
									<label  class="form-label">&nbsp;</label>
									<select required class="form-select" name="input[Pc_s_unit]">
										<option selected value="ppm">ppm</option>
										<option value="kg_ha">kg P/ha</option>
										<option value="pct">%</option>
										<option value="meq_100">meq PO43-/100g</option>
										<option value="meq_kg">meq PO43-/kg</option>
										<option value="meq_l">meq PO43-/l</option>
									</select>
								</div>
								<div class="col-sm-2">
									<label for="Kc_s" class="form-label">K</label>
									<input required type="number" class="form-control" id="Kc_s" name="input[Kc_s]" min="0" step="0.1" />
								</div>
								<div class="col-sm-2">
									<label  class="form-label">&nbsp;</label>
									<select required class="form-select" name="input[Kc_s_unit]">
										<option selected value="ppm">ppm</option>
										<option value="kg_ha">kg K/ha</option>
										<option value="pct">%</option>
										<option value="meq_100">meq K+/100g</option>
										<option value="meq_kg">meq K+/kg</option>
										<option value="meq_l">meq K+/l</option>
									</select>
								</div>
							</div>
						</div>
					</div>
					<br/>
					<div class="card">
						<h5 class="card-header bg-secondary text-white">Crop</h5>
						<div class="card-body">
							<div class="row">
								<div class="col-sm-3">
									<label for="crop_type" class="form-label">Plant common name&nbsp;&nbsp;</label>
									<a href="#" data-bs-toggle="modal" data-bs-target="#crops-modal">
										<i class="fa fa-info"></i>
									</a>
									<select required class="form-select" id="crop_type" name="input[crop_type]"></select>
									<div class="modal fade" tabindex="-1" aria-hidden="true" id="crops-modal">
										<div class="modal-dialog">
											<div class="modal-content p-5">
												<span>If you don't provide phenological data, you should take into account before selecting a crop that default phenological data is only applicable to these crops:</span>
												<br/>
												<ul>
													<li>Barley 2 row</li>
													<li>Barley 6 row</li>
													<li>Corn</li>
													<li>Maize</li>
													<li>Wheat-Bread-Hard type</li>
													<li>Wheat-Bread-Soft type</li>
													<li>Garlic</li>
												</ul>
											</div>
										</div>
									</div>
								</div>
								<div class="col-sm-3">
									<label for="PK_strategy" class="form-label">PK strategy&nbsp;&nbsp;</label>
									<a href="#" data-bs-toggle="modal" data-bs-target="#pkstrategies-modal">
										<i class="fa fa-info"></i>
									</a>
									<select required class="form-select" id="PK_strategy" name="input[PK_strategy]">
										<option value="maximum-yield">Buildup & maintenance (maximum yield)</option>
										<option value="minimum-fertilizer">Buildup & maintenance (reduced fertilizer)</option>
										<option value="sufficiency">Sufficiency (minimum fertilizer)</option>
										<option value="maintenance">Maintenance (soil analysis not avalable)</option>
									</select>
									<div class="modal fade" tabindex="-1" aria-hidden="true" id="pkstrategies-modal">
										<div class="modal-dialog modal-lg">
											<div class="modal-content p-5">
												<ul>
													<li>
														<b>Sufficiency strategy:</b> apply P or K only when the soil test level is below the defined threshold value for fertilizer response for the specific test used to assess the nutrient availability in soil.
													</li>
													<li>
														<b>Buildup and maintenance (minimum fertilizer) strategy:</b> add fertilizer to compensate for P and K exported from the farm and also to progressively rise the level to the threshold values, if the current level is below the threshold.
													</li>
													<li>
														<b>Buildup and maintenance (maximum yield) strategy:</b> similar to the previous strategy but now using the parameters leading to maximum yield.
													</li>
													<li>
														<b>Maintenance strategy:</b> if no soil tests are available, this alternative consisting of adding fertilizers to compensate for the P and K exported by harvested parts of crops. Here we assume that the user considers that P and K levels in the soil are not limiting for crop yields, the approach being a “zero balance”.
													</li>
												</ul>
											</div>
										</div>
									</div>
								</div>
								<div class="col-sm-2">
									<label for="crop_startDate" class="form-label">Seeding</label>
									<input required type="date" class="form-control" id="crop_startDate" name="input[crop_startDate]" value="2015-01-11" />
								</div>
								<div class="col-sm-2">
									<label for="crop_endDate" class="form-label">End of cultivation</label>
									<input required type="date" class="form-control" id="crop_endDate" name="input[crop_endDate]" value="2015-06-11" />
								</div>
								<div class="col-sm-2">
									<label for="yield" class="form-label">Yield (kg/ha)</label>
									<input required type="number" class="form-control" id="yield" name="input[yield]" min="0" />
								</div>
							</div>
							<div class="row mt-2">
								<div class="col-sm-2">
									<label for="Nc_h" class="form-label">N (%)</label>
									<input required type="number" class="form-control" id="Nc_h" name="input[Nc_h]" min="0"  max="100" step="0.001" />
								</div>
								<div class="col-sm-2">
									<label for="Pc_h" class="form-label">P (%)</label>
									<input required type="number" class="form-control" id="Pc_h" name="input[Pc_h]" min="0"  max="100" step="0.001" />
								</div>
								<div class="col-sm-2">
									<label for="Kc_h" class="form-label">K (%)</label>
									<input required type="number" class="form-control" id="Kc_h" name="input[Kc_h]" min="0"  max="100" step="0.001" />
								</div>
								<div class="col-sm-2">
									<label for="export_r" class="form-label">Export residues (%)</label>
									<input required type="number" class="form-control" id="export_r" name="input[export_r]" value="100" min="0" max="100" />
								</div>
								<div class="col-sm-2">
									<label for="HI_est" class="form-label">HI (%)</label>
									<input required type="number" class="form-control" id="HI_est" name="input[HI_est]" value="45" min="0" max="100" step="0.1" />
								</div>
								<div class="col-sm-2">
									<label for="CV" class="form-label">CV (%)</label>
									<input required type="number" class="form-control" id="CV" name="input[CV]" value="20" min="0" max="100"  />
								</div>
							</div>
						</div>
					</div>
					<br/>
					<div class="card">
						<h5 class="card-header bg-secondary text-white">Plot</h5>
						<div class="card-body">
							<div class="row">
								<div class="col-sm-4">
									<label for="climatic_zone" class="form-label">Climatic zone&nbsp;&nbsp;</label>
									<a href="#" data-bs-toggle="modal" data-bs-target="#climatic_zone-modal">
										<i class="fa fa-info"></i>
									</a>
									<select required class="form-select" id="climatic_zone" name="input[climatic_zone]">
										<option value="alpine">Alpine</option>
										<option selected value="atlantic">Atlantic</option>
										<option value="continental">Continental</option>
										<option value="northern">Northern</option>
										<option value="southern">Southern</option>
									</select>
									<div class="modal fade" tabindex="-1" aria-hidden="true" id="climatic_zone-modal">
										<div class="modal-dialog">
											<div class="modal-content">
												<img src="/img/climates.png" />
											</div>
										</div>
									</div>
								</div>
								<div class="col-sm-2">
									<label for="dose_irrigation" class="form-label">Irrigation dose (m3/ha)</label>
									<input required type="number" class="form-control" id="dose_irrigation" name="input[dose_irrigation]" value="4000" />
								</div>
								<div class="col-sm-2">
									<label for="water_supply" class="form-label">Water supply</label>
									<select required class="form-select" id="water_supply" name="input[water_supply]">
										<option value="0">Rainfed</option>
										<option selected value="1">Irrigated</option>
									</select>								
								</div>
								<div class="col-sm-2">
									<label for="type_irrigated" class="form-label">Type of irrigation</label>
									<select required class="form-select" id="type_irrigated" name="input[type_irrigated]">
										<option value="trickle">Trickle</option>
										<option selected value="sprinkler">Sprinkler</option>
										<option value="surface">Surface</option>
									</select>
								</div>
								<div class="col-sm-2">
									<label for="waterNitrate" class="form-label">NO3 contained (ppm)</label>
									<input required type="number" class="form-control" id="waterNitrate" name="input[waterNitrate]" value="15" />
								</div>
							</div>
							<div class="row mt-3">
								<div class="col-sm-6">
									<label class="form-label">Climatic data</label>
									<input name="input[Clima]" type="hidden" />
									<input required class="form-control" id="fileClima" name="Clima" type="file" accept=".csv" />
									<a href="/csv/F1/Clima.csv">Download example</a>
								</div>
								<div class="col-sm-6">
									<label class="form-label">Meteo data</label>
									<input name="input[Meteo]" type="hidden" />
									<input required class="form-control" id="fileMeteo" name="Meteo" type="file" accept=".csv" />
									<a href="/csv/F1/Meteo.csv">Download example</a>
								</div>
							</div>
							<div class="row mt-3">
								<div class="col-sm-6">
									<label class="form-label">NDVI typical data</label>
									<input name="input[NDVItipo]" type="hidden" />
									<input required class="form-control" id="fileNDVItipo" name="NDVItipo" type="file" accept=".csv" />
									<a href="/csv/F1/NDVI_tipo.csv">Download example</a>
								</div>
								<div class="col-sm-6">
									<label class="form-label">NDVI real data</label>
									<input name="input[NDVIreal]" type="hidden" />
									<input required class="form-control" id="fileNDVIreal" name="NDVIreal" type="file" accept=".csv" />
									<a href="/csv/F1/NDVI_real.csv">Download example</a>
								</div>
							</div>
							<div class="row mt-3">
								<div class="col-sm-6">
									<label class="form-label">Irrigation data</label>
									<input name="input[Riegos]" type="hidden" />
									<input required class="form-control" id="fileRiegos" name="Riegos" type="file" accept=".csv" />
									<a href="/csv/F1/Riego.csv">Download example</a>
								</div>
								<div class="col-sm-6">
									<label class="form-label">Phenological data&nbsp;&nbsp;</label>
									<a href="#" data-bs-toggle="modal" data-bs-target="#feno-modal">
										<i class="fa fa-info"></i>
									</a>
									<input name="input[FenoBBCH]" type="hidden" />
									<input class="form-control" id="fileFenoBBCH" name="FenoBBCH" type="file" accept=".csv" />
									<a href="/csv/F2/BBCH.csv">Download example</a>
									<div class="modal fade" tabindex="-1" aria-hidden="true" id="feno-modal">
										<div class="modal-dialog">
											<div class="modal-content p-5">
												<span>As they are the most representative ones, you should include at least these phenological states for BBCH:<br/>09, 22, 39, 55, 89</span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<br/>
					<div class="card">
						<h5 class="card-header bg-secondary text-white">Fertilization</h5>
						<div class="card-body">
							<div class="row">
								<div class="col-sm-3">
									<label for="fertilizers" class="form-label mt-2 pull-right">List of current prices:</label>
								</div>
								<div class="col-sm-5">
									<input name="input[prices]" type="hidden" />
									<input class="form-control" name="prices" type="file" accept=".csv" />
								</div>
								<div class="col-sm-4">
									<a href="/csv/F1/Fertilizers.csv">Download default prices</a>
								</div>
							</div>
							<div class="row mt-3">
								<div class="col-sm-3">
									<label for="fertilizers" class="form-label mt-2 pull-right">Select to include in list of best fertilizer:</label>
								</div>
								<div class="col-sm-9">
									<select class="form-select" id="fertilizers" name="fertilizers" multiple></select>
								</div>
							</div>
							<div class="row mt-3">
								<div class="col-sm-3">
									<label class="form-label mt-1 pull-right">Applications planning (calendar):</label>
								</div>
								<div class="col-sm-9">
									<ul class="list-unstyled">
										<li class="default">
											<span>Add something from below...</span>
											<button class="btn fa fa-remove text-white"></button>
										</li>
									</ul>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-1 text-end">
									<button type="button" class="btn btn-dark">
										<i class="fa fa-plus"></i>
									</button>
								</div>
								<div class="col-sm-2">
									<input type="date" class="form-control" name="date" />
								</div>
								<div class="col-sm-4">
									<select class="form-select" name="fertilizerID" id="fertilizerID">
										<option value="#">BEST FERTILIZER</option>
									</select>
								</div>
								<div class="col-sm-2">
									<input type="number" class="form-control" placeholder="Amount" id="amount" name="amount" min="0" />
									<label for="amount" class="form-label">kg/ha</label>
								</div>
								<div class="col-sm-1">
									<input disabled type="number" class="form-control" id="N" name="N" value="0" min="0" max="100" step="0.001" />
									<label for="N" class="form-label">% N</label>
								</div>
								<div class="col-sm-1">
									<input disabled type="number" class="form-control" id="P" name="P" value="0" min="0" max="100" step="0.001" />
									<label for="P" class="form-label">% P</label>
								</div>
								<div class="col-sm-1">
									<input disabled type="number" class="form-control" id="K" name="K" value="0" min="0" max="100" step="0.001" />
									<label for="K" class="form-label">% K</label>
								</div>
							</div>
						</div>
					</div>
					<br/>
					<div class="row">
						<div class="col-sm-4 d-flex align-items-center justify-content-center">
							<button type="button" class="btn btn-info" name="SWB">
								<i class="fa fa-play"></i>
								<span>Water Balance</span>
							</button>
						</div>
						<div class="col-sm-4 d-flex align-items-center justify-content-center">
							<button type="button" class="btn btn-success" name="SNB/daily">
								<i class="fa fa-play"></i>
								<span>Nitrogen Balance</span>
							</button>
						</div>
						<div class="col-sm-4 d-flex align-items-center justify-content-center">
							<button type="button" class="btn btn-warning" name="SNB/calendar">
								<i class="fa fa-play"></i>
								<span>Fertilization Calendar</span>
							</button>
						</div>
					</div>
					<br/>
					<div class="table-responsive d-none">
						<table class="table table-info d-none" name="SWB" id="F1-tabla-1">
							<thead>
								<tr>
									<th scope="col">Date</th>
									<th scope="col">DP</th>
									<th scope="col">DPe</th>
									<th scope="col">E</th>
									<th scope="col">ETc</th>
									<th scope="col">ETc_adj</th>
									<th scope="col">J</th>
									<th scope="col">Kc</th>
									<th scope="col">Kc_adj</th>
									<th scope="col">Kc_max</th>
									<th scope="col">Ke</th>
									<th scope="col">Kr</th>
									<th scope="col">NDVI</th>
									<th scope="col">RAW</th>
									<th scope="col">fc</th>
									<th scope="col">few</th>
								</tr>
							</thead>
							<tbody>
								<tr name="template">
									<td name="Fecha"></td>
									<td name="DP"></td>
									<td name="DPe"></td>
									<td name="E"></td>
									<td name="ETc"></td>
									<td name="ETc_adj"></td>
									<td name="J"></td>
									<td name="Kc"></td>
									<td name="Kc_adj"></td>
									<td name="Kc_max"></td>
									<td name="Ke"></td>
									<td name="Kr"></td>
									<td name="NDVI_interpolado"></td>
									<td name="RAW"></td>
									<td name="fc"></td>
									<td name="few"></td>
								</tr>
							</tbody>
						</table>
						<!-- Botón de generación de pdf -->
						<div style="text-align: center;">
							<button type="button" class="btn btn-lg btn-warning" onclick="getPDF('F1', true, 1)">
								Generate PDF output
							</button>
						</div>
						<!-- Botón de generación de pdf -->
					</div>
					<br/>
					<div class="table-responsive d-none">
						<table class="table table-success d-none" name="SNB/daily" id="F1-tabla-2">
							<thead>
								<tr>
									<th scope="col">Date</th>
									<th scope="col">N_rate</th>
									<th scope="col">N_deni</th>
									<th scope="col">N_mineral_soil</th>
									<th scope="col">N_curve</th>
									<th scope="col">Nl</th>
									<th scope="col">N extr (choosen)</th>
									<th scope="col">Tm</th>
									<th scope="col">BBCH</th>
								</tr>
							</thead>
							<tbody>
								<tr name="template">
									<td name="Fecha"></td>
									<td name="N_rate"></td>
									<td name="N_deni"></td>
									<td name="N_mineral_soil"></td>
									<td name="N_curve"></td>
									<td name="Nl"></td>
									<td name="N_extr_"></td>
									<td name="Tm"></td>
									<td name="BBCH"></td>
								</tr>
							</tbody>
						</table>
						<!-- Botón de generación de pdf -->
						<div style="text-align: center;">
							<button type="button" class="btn btn-lg btn-warning" onclick="getPDF('F1', true, 2)">
								Generate PDF output
							</button>
						</div>
						<!-- Botón de generación de pdf -->
					</div>
					<br/>
					<div class="table-responsive d-none">
						<table class="table table-warning d-none" name="SNB/calendar" id="F1-tabla-3">
							<thead>
								<tr>
									<th scope="col">Date</th>
									<th scope="col">Fertilizer</th>
									<th scope="col">Method</th>
									<th scope="col">Amount (kg/ha)</th>
									<th scope="col">N (kg/ha)</th>
									<th scope="col">P (kg/ha)</th>
									<th scope="col">K (kg/ha)</th>
									<th scope="col">Cost (&euro;/ha)</th>
								</tr>
							</thead>
							<tbody>
								<tr name="template">
									<td name="date"></td>
									<td name="fertilizer_name"></td>
									<td name="method"></td>
									<td name="amount"></td>
									<td name="N"></td>
									<td name="P"></td>
									<td name="K"></td>
									<td name="cost"></td>
								</tr>
							</tbody>
						</table>
						<!-- Botón de generación de pdf -->
						<div style="text-align: center;">
							<button type="button" class="btn btn-lg btn-warning" onclick="getPDF('F1', true, 3)">
								Generate PDF output
							</button>
						</div>
						<!-- Botón de generación de pdf -->
					</div>
				</form>
			</div>
		</main>
		<footer class="footer mt-auto py-3 bg-light"></footer>
		<script src="/lib/bootstrap.bundle.min.js"></script>
		<script src="/lib/form-data-json.min.js"></script>
		<script src="/lib/multiselect.min.js"></script>
		<script src="/js/form-f1.js"></script>
		<script src="/js/global-scripts.js"></script>
		<!-- Generación de PDF -->
		<script src="/lib/pdf/jspdf.umd.js"></script>
    	<script>if (!window.jsPDF) window.jsPDF = window.jspdf.jsPDF</script>
    	<script src="/lib/pdf/calibri-normal.js"></script>
    	<script src="/lib/pdf/jspdf.plugin.autotable.js"></script>
		<script src="/js/templates_pdf/funcionalidad_pdf.js"></script>
		<script src="/js/templates_pdf/header_footer.js"></script>
		<script src="/js/templates_pdf/F1_pdf.js"></script>
	</body>
</html>
