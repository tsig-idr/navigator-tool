<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="David Cifuentes" />
    <meta name="generator" content="" />
    <title>NAVIGATOR F3</title>

    <!-- Bootstrap core CSS -->
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
      crossorigin="anonymous"
    />
    <!-- Custom styles for this template -->
    <link href="../css/product.css" rel="stylesheet" />
  </head>
  <body class="d-flex flex-column h-100">
    <navbar></navbar>

    <main class="flex-shrink-0">
      <div class="container-fluid pt-5">
        <div class="pt-3 text-center">
          <!--<img class="d-block mx-auto mb-4" src="../assets/brand/bootstrap-logo.svg" alt="" width="72" height="57"> -->
          <h2>NAVIGATOR F3</h2>

          <p>Nitrogen, Phosphorus and Potassium balance calculation interface. </p>
        </div>

        <form class="needs-validation" id="formFertilicalc" novalidate>
          <div class="col-md-12">
            <div class="card">
              <h5 class="card-header bg-success text-white">Plot</h5>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-4">
                    <label for="soilType" class="form-label"
                      >Type of soil</label
                    >
                    <select
                      class="form-select"
                      id="soilType"
                      name="plot[soil_type]"
                      required
                    >
                      <option value="sand">Sand</option>
                      <option value="sandyLoam">Sandy Loam</option>
                      <option value="loam">Loam</option>
                      <option value="siltyLoam" selected="selected">
                        Silty Loam
                      </option>
                      <option value="clayLoam">Clay Loam</option>
                      <option value="clay">Clay</option>
                    </select>
                    <div class="invalid-feedback">
                      Please select a valid soil type.
                    </div>
                  </div>

                  <div class="col-md-2">
                    <label
                      for="som"
                      class="form-label"
                      title="Soil organic matter (%)"
                      >SOM (%)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="som"
                      name="plot[som]"
                      min="0"
                      step="any"
                      placeholder="Soil organic matter (%)"
                      value="0"
                    />
                  </div>
                  <div class="col-md-2">
                    <label
                      for="cec"
                      class="form-label"
                      title="Cation Exchange Capacity"
                    >
                      CEC (meq/kg)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="cec"
                      name="plot[cec]"
                      min="0"
                      placeholder="Cation Exchange Capacity"
                      value="80"
                      disabled="disabled"
                    />
                  </div>
                  <div class="col-md-2">
                    <label for="ph" class="form-label">pH </label>
                    <input
                      type="number"
                      class="form-control"
                      id="ph"
                      name="plot[ph]"
                      min="0"
                      placeholder="Soil pH"
                      value="7.0"
                      disabled="disabled"
                    />
                  </div>

                  <div class="col-md-2">
                    <br />
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="tillage"
                      name="plot[tillage]"
                    />
                    <label class="form-check-label" for="tillage"
                      >Tillage</label
                    >
                  </div>

                  <div class="col-md-2">
                    <label for="soilPConc" class="form-label"
                      >Soil P mg/kg</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="soilPConc"
                      name="plot[soil_P_conc]"
                      min="0"
                      placeholder="Soil P concentration (ppm)"
                      value="0"
                    />
                  </div>
                  <div class="col-md-2">
                    <label for="soilKConc" class="form-label"
                      >Soil K mg/kg</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="soilKConc"
                      name="plot[soil_K_conc]"
                      min="0"
                      placeholder="Soil K concentration (ppm)"
                      value="0"
                    />
                  </div>

                  <div class="col-md-3">
                    <label for="soilPMethod" class="form-label"
                      >Method of soil P analysis</label
                    >
                    <select
                      class="form-select"
                      id="soilPMethod"
                      name="plot[soil_P_method]"
                      disabled
                    >
                      <option value="">Choose...</option>
                      <option value="0">Olsen</option>
                      <option value="1">Ammonium lactate</option>
                      <option value="2">Mehlich III</option>
                      <option value="3">Bray</option>
                      <option value="4">Ammonium acetate + EDTA</option>
                      <option value="5">Calcium lactate</option>
                      <option value="6">Calcium lactate acetate</option>
                      <option value="7">Paper strip</option>
                      <option value="8">Acid ammonium acetate</option>
                      <option value="9">H2O</option>
                      <option value="10">saturated water</option>
                      <option value="11">Ca Cl2</option>
                    </select>
                    <div class="invalid-feedback">
                      Please select a valid method of soil P analysis
                    </div>
                  </div>

                  <div class="col-md-3">
                    <label for="pStrategy" class="form-label"
                      >PK strategy</label
                    >
                    <select
                      class="form-select"
                      id="pStrategy"
                      name="plot[fert_strategy]"
                    >
                      <option value="1">Sufficiency</option>
                      <option value="2">
                        Buildup & maintenance (minimum fertilizer)
                      </option>
                      <option value="3">
                        Buildup & maintenance (maximum yield)
                      </option>
                      <option value="4" selected="selected">
                        Maintenance (for definitions see paper)
                      </option>
                    </select>
                    <div class="invalid-feedback">
                      Please select a valid method of soil PK strategy
                    </div>
                  </div>

                  <div class="col-md-2">
                    <label for="waterSupply" class="form-label"
                      >Water supply</label
                    >
                    <select
                      class="form-select"
                      id="waterSupply"
                      name="plot[water_supply]"
                    >
                      <option value="0">Irrigated/humid</option>
                      <option value="1">Rainfed /dry</option>
                    </select>
                    <div class="invalid-feedback">
                      Please select a Water supply
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-12">
            <div class="table-responsive">
            <table class="table" id="tableNPKCrops">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col"></th>
                  <th scope="col">Crop</th>
                  <th scope="col">Yield</th>
                  <th scope="col">CV (%)</th>
                  <th scope="col">HI (%)</th>
                  <th scope="col">FRES (%)</th>
                  <th scope="col">N (%)</th>
                  <th scope="col">P (%)</th>
                  <th scope="col">K (%)</th>
                  <th scope="col">Burning</th>
                </tr>
              </thead>
              <tbody>
                <tr class="trow" data-row="0">
                  <th scope="row">1</th>
                  <td></td>
                  <td>
                    <select class="form-select" name="crops[0][crop]" required onchange="onChangeCrop(this)">
                      <option value="">Choose...</option>
                    </select>
                    <input
                      type="hidden"
                      class="form-control"
                      name="crops[0][crop_name]"
                      placeholder=""
                    />
                    <input
                      type="hidden"
                      class="form-control"
                      name="crops[0][crop_latin_name]"
                      placeholder=""
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      name="crops[0][yield]"
                      placeholder="Crop yield (kg commercial product/ha)"
                      min="0"
                      required
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      name="crops[0][cv]"
                      placeholder="Coefficient of Variation of yield (%)"
                      min="0"
                      max="100"
                      required
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      name="crops[0][harvest_index]"
                      placeholder="Harvest Index (%)"
                      min="0"
                      max="100"
                      required
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      name="crops[0][fres]"
                      placeholder="Fraction of crop residues remaining in the field after harvest (%)"
                      min="0"
                      max="100"
                      required
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      name="crops[0][N_harv]"
                      placeholder="N concentration of harvested organ (% over dry mass)"
                      min="0"
                      max="100"
                      step="any"
                      required
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      name="crops[0][P_harv]"
                      placeholder=" P concentration of harvested organ (% over dry mass)"
                      min="0"
                      max="100"
                      step="any"
                      required
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      name="crops[0][K_harv]"
                      placeholder=" K concentration of harvested organ (% over dry mass)"
                      min="0"
                      max="100"
                      step="any"
                      required
                    />
                  </td>
                  <td>
                    <input
                      type="checkbox"
                      class="form-check-input"
                      name="crops[0][burning]"
                    />
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="12">
                    <button
                      type="button"
                      class="btn btn-success"
                      id="addMoreCrops"
                    >
                      + Add more crops
                    </button>
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
          </div>
          <div class="col-md-12 text-center">
            <button
              type="button"
              class="btn btn-primary"
              id="submitFertilicalc"
            >
              <i class="fa fa-play"></i> Calculate
            </button>
          </div>
        </form>

        <section id="NPKresults" class="d-none">
          <div class="row">
            <div class="col-md-12">
              <h3>Results:</h3>
            </div>
          </div>
          <div class="col-md-12">
            <h3>NPK Requirements</h3>
            <table class="table table-dark" id="tableNPKrequirements">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">crop_name_latin</th>
                  <th scope="col">crop_name</th>
                  <th scope="col">N_fert_min kg N/ha</th>
                  <th scope="col">N_fert_max kg N/ha</th>
                  <th scope="col">N_fert_avg kg N/ha</th>
                  <th scope="col">P_fert kg P/ha</th>
                  <th scope="col">K_fert kg K/ha</th>
                  <th scope="col">P_fert kg P2O5/ha</th>
                  <th scope="col">K_fert kg K2O/ha</th>
                </tr>
              </thead>
              <tbody>
                <!-- tabla de resultados vacia-->
              </tbody>
            </table>
          </div>
        </section>
      </div>
    </main>

    <footer class="footer mt-auto py-3 bg-light"></footer>

    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>
    <script src="https://brainfoolong.github.io/form-data-json/lib/form-data-json.min.js"></script>
    <script src="/js/form-navigator-f3.js"></script>
    <script src="/js/global-scripts.js"></script>
  </body>
</html>
