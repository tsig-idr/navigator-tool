<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="" />
	<meta name="author" content="David Cifuentes" />
	<meta name="generator" content="" />
	<title>NAVIGATOR TOOL F3</title>

	<!-- Bootstrap core CSS -->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous" />
	<!-- Custom styles for this template -->
	<link href="../css/product.css" rel="stylesheet" />
</head>

<body class="d-flex flex-column h-100">
	<navbar></navbar>

	<main class="flex-shrink-0">
		<div class="container-fluid pt-5">
			<div class="pt-3 text-center">
				<!--<img class="d-block mx-auto mb-4" src="../assets/brand/bootstrap-logo.svg" alt="" width="72" height="57"> -->
				<h2>NAVIGATOR TOOL F3</h2>
				<p>
					The tool allows you to calculate the Nitrogen requirements for your plot..
				</p>
			</div>

			<div class="card" id="step1">
				<div class="card-header">1.- General Data</div>
				<div class="card-body">
					<form class="needs-validation" id="formPlotNavigatorF3" novalidate>
						<div class="card">
							<h5 class="card-header bg-success text-white">Plot</h5>
							<div class="card-body">

								<div class="row">
									<div class="col-md-12">
										<div class="table-responsive">
											<table class="table" id="tableNPKCrops">
												<thead>
													<tr>
														<th scope="col">#</th>
														<th scope="col"></th>
														<th scope="col">Crop</th>
														<!-- 
															<th scope="col">Type of crop</th>
															<th scope="col">Application method</th>
															-->
														<th scope="col">Yield (kg/ha)</th>
														<th scope="col">Export residues (%)</th>
														<th scope="col">CV (%)</th>
														<th scope="col">HI (%)</th>
														<th scope="col">N (%)</th>
														<th scope="col">P (%)</th>
														<th scope="col">K (%)</th>
														<th scope="col">PK Strategy</th>                   
													</tr>
												</thead>
												<tbody>
													<tr class="trow" data-row="0">
														<th scope="row">1</th>
														<td></td>
														<td>
															<select class="form-select" name="crops[0][cropID]" required
																onchange="onChangeCrop(this)">
																<option value="">Choose...</option>
															</select>
															<input type="hidden" class="form-control" name="crops[0][crop_name]" placeholder="" />
															<input type="hidden" class="form-control" name="crops[0][crop_latin_name]"
																placeholder="" />
														</td>
													 
														<td>
															<input type="number" class="form-control" name="crops[0][yield]"
																placeholder="Crop yield (kg commercial product/ha)" min="0" required  />
														</td>
														<td>
															<input type="number" class="form-control" name="crops[0][export_r]"
																placeholder="Export residue (%)" min="0" max="100" value="100"  />
														</td>
														<td>
															<input type="number" class="form-control" name="crops[0][CV]"
																placeholder="Coefficient of Variation of yield (%)" min="0" max="100" value="20" required  />
														</td>
														<td>
															<input type="number" class="form-control" name="crops[0][HI_est]"
																placeholder="Harvest Index (%)" min="0" max="100" required  />
														</td>
													 
														<td>
															<input type="number" class="form-control" name="crops[0][Nc_h]"
																placeholder="N concentration of harvested organ (% over dry mass)" min="0" max="100"
																step="any"  />
														</td>
														<td>
															<input type="number" class="form-control" name="crops[0][Pc_h]"
																placeholder=" P concentration of harvested organ (% over dry mass)" min="0" max="100"
																step="any" />
														</td>
														<td>
															<input type="number" class="form-control" name="crops[0][Kc_h]"
																placeholder=" K concentration of harvested organ (% over dry mass)" min="0" max="100"
																step="any" />
														</td>
														<td>
															<select class="form-select" name="crops[0][PK_strategy]" onchange="onChangePKStrategy(this)" required>
																<option value="maximum-yield">Buildup & maintenance (maximum yield)</option>
																<option value="minimum-fertilizer">Buildup & maintenance (reduced fertilizer)</option>
																<option value="sufficiency">Sufficiency (minimum fertilizer)</option>
																<option value="maintenance">Maintenance (soil analysis not avalable)</option>
															</select>
														</td>
													 
													</tr>
												</tbody>
						
											</table>
										</div> <!-- table-responsive -->
									</div> <!-- col-md-12 -->
								</div> <!-- row -->
							</div>
						</div>
									<div class="card">
										<h5 class="card-header bg-secondary text-white">Soil</h5>
										<div class="card-body">

								<div class="row">
									<div class="col-md-3">
										<label for="soilTexture" class="form-label">Soil texture</label>
										<select class="form-select" id="soilTexture" name="soil[soil_texture]" required  onchange="onChangeSoilTexture(this)"></select>
										<div class="invalid-feedback">
											Please select a valid soil texture.
										</div>
									</div>

									<div class="col-md-2">
										<label for="SOM" class="form-label" title="Soil organic matter (%)">SOM (%)</label>
										<input type="number" class="form-control" id="SOM" name="soil[SOM]" min="0" step="0.1"
											placeholder="Soil organic matter (%)" value="1.5" />
									</div>
									<div class="col-md-3">
										<label for="case_soil" class="form-label">Case</label>
										<select class="form-select" id="case_soil" name="soil[case]">
											<option value="tilledNFertilizer">Tilled (N from fertiizer)</option>
											<option value="noTillage">No tillage</option>
											<option value="tilledNManure">Tilled (N from manure)</option>
											
										</select>
										<div class="invalid-feedback">
											Please select a valid method of Case.
										</div>
									</div>
									<div class="col-md-2">
										<label for="ph" class="form-label">pH </label>
										<input type="number" class="form-control" id="ph" name="soil[pH]" min="0" step="0.1" placeholder="Soil pH"
											value="7" />
									</div>
									<div class="col-md-2">
										<label for="cec" class="form-label" title="Cation Exchange Capacity">
											CEC (meq/kg)</label>
										<input type="number" class="form-control" id="cec" name="soil[CEC]" min="0" step="0.1"
											placeholder="Cation Exchange Capacity" value="80"/>
									</div>
								
								</div>
								<div class="row">
									<div class="col-md-2">
										<label for="depth_s" class="form-label" title="Depth soil">
											Soil depth (m)</label>
										<input type="number" class="form-control" id="depth_s" name="soil[depth_s]" min="0" step="0.01"
											placeholder="Depth soil" value="0.3" />
									</div>
									<div class="col-md-2">
										<label for="Nc_s_initial" class="form-label" title="Nitrogen soil initial">
											Soil N initial (kgN/ha)</label>
										<input type="number" class="form-control" id="Nc_s_initial" name="soil[Nc_s_initial]" min="0" step="0.1"
											placeholder="Nitrogen soil initial" value="30" />
									</div>
									<div class="col-md-2">
										<label for="Nc_end" class="form-label" title="Nitrogen soil end">
											Soil N end (kgN/ha)</label>
										<input type="number" class="form-control" id="Nc_end" name="soil[Nc_end]" min="0" step="0.1"
											placeholder="Nitrogen soil end" value="20" />
									</div>
								</div>
								<div class="row">
									<div class="col-md-2">
										<label for="Pc_s" class="form-label" title="Pc_s">
											P (ppm)</label>
										<input type="number" class="form-control" id="Pc_s" name="soil[Pc_s]" min="0" step="0.01"
											placeholder="P" value="" />
									</div>
									<div class="col-md-3">
										<label for="Pc_method" class="form-label">P method</label>
										<select class="form-select" id="Pc_method" name="soil[Pc_method]">
											<option value="olsen">Olsen</option>
											<option value="ammoniumLactate">Ammonium lactate</option>
											<option value="mehlichIII">Mehlich III</option>
											<option value="bray">Bray</option>
											<option value="amoniumAcetate+EDTA">Ammonium acetate + EDTA</option>
											<option value="calciumLactate">Calcium lactate</option>
											<option value="calciumLactateAcetate">Calcium lactate acetate</option>
											<option value="paperStrip">Paper strip</option>
											<option value="acidAmmoniumAcetate">Acid ammonium acetate</option>
											<option value="H2O">H2O</option>
											<option value="saturatedWater">saturated water</option>
											<option value="CaCl2">Ca Cl2</option> 
										</select>
										<div class="invalid-feedback">
											Please select a valid method of soil P analysis
										</div>
									</div>
									<div class="col-md-2">
										<label for="Kc_s" class="form-label" title="Kc_s">
											K (ppm)</label>
										<input type="number" class="form-control" id="Kc_s" name="soil[Kc_s]" min="0"
											placeholder="K" value="100" step="0.01" />
									</div>
									<div class="col-md-3">
										<label for="Kc_method" class="form-label">K method</label>
										<select class="form-select" id="Kc_method" name="soil[Kc_method]">
											<option value="ammoniumAcetate">Acetato de amonio</option>
										</select>
										<div class="invalid-feedback">
											Please select a valid method of soil K analysis
										</div>
									</div>
								</div> 
							</div>
						</div>
						<div class="card">
							<h5 class="card-header bg-info text-white">Soil</h5>
							<div class="card-body">
								<div class="row">
									
									<div class="col-md-3">
										<label for="water_supply" class="form-label">Water supply</label>
										<select class="form-select" id="water_supply" name="plot[water_supply]" onchange="onChangeWaterSypply(this)">
											<option value="0">Rainfed</option>
											<option value="1">Irrigated</option>
										</select>
										<div class="invalid-feedback">
											Please select a valid method of Water supply.
										</div>
									</div>

									<div class="col-md-3">
										<label for="type_irrigated" class="form-label">Type Irrigated</label>
										<select class="form-select" id="type_irrigated" name="plot[type_irrigated]" disabled>
											<option value="trickle">Trickle</option>
											<option value="splinkler">Splinkler</option>
											<option value="surface">Surface</option>
										</select>
										<div class="invalid-feedback">
											Please select a valid method of Type Irrigated
										</div>
									</div>
									<div class="col-md-2">
										<label for="dose_irrigation" class="form-label" title="Dose Irrigation (m3/ha)">
											Dose Irrigation (m3/ha)</label>
										<input type="number" class="form-control" id="dose_irrigation" name="plot[dose_irrigation]" min="0"
											placeholder="Dose Irrigation" value="0" disabled />
									</div>
									<div class="col-md-2">
										<label for="Nc_NO3_water" class="form-label" title="N water">
											Nc_NO3_water (ppm)</label>
										<input type="number" class="form-control" id="Nc_NO3_water" name="plot[Nc_NO3_water]" min="0"
											placeholder="Dose Irrigation" value="25" disabled />
									</div>
									<div class="col-md-3">
										<label for="climatic_zone" class="form-label">Climatic Zone</label>
										<select class="form-select" id="climatic_zone" name="plot[climatic_zone]" onchange="onChangeClimaticZone(this)">
											<option value="alpine">Alpine</option>
											<option value="atlantic">Atlantic</option>
											<option value="continental">Continental</option>
											<option value="northern">Northern </option>
											<option value="southern" selected>Southern</option>
										</select>
										<div class="invalid-feedback">
											Please select a valid method of Climatic Zone
										</div>
									</div>
									<div class="col-md-2">
										<label for="rain_a" class="form-label" title="Annual rainfall">
											Annual Rainfall (mm)</label>
										<input type="number" class="form-control" id="rain_a" name="plot[rain_a]" min="0"
											placeholder="Annual rainfall" value="500" />
									</div>

									<div class="col-md-2">
										<label for="rain_w" class="form-label" title="Total rainfall during autumn and winter">
											Autumn-Winter Rainfall (mm)</label>
										<input type="number" class="form-control" id="rain_w" name="plot[rain_w]" min="0"
											placeholder="Autumn & Winter Rainfall" value="300" />
									</div>
								 
									
								</div>
								<!-- 
								<hr>
								<div class="row">
									<div class="col-md-3">
										<label for="type_fmanure" class="form-label"><input type="checkbox" class="form-check-input" name="fertilization[apply_type_fmanure]" checked onchange="onChangeApplyOrganicFertilizer(this)" /> Organic Fertilizer</label>
										<select class="form-select" id="type_fmanure" name="fertilization[type_fmanure]">
										 
										</select>
										<div class="invalid-feedback">
											Please select a valid method of Type Fert. manure.
										</div>
									</div>

									<div class="col-md-2">
										<label for="fert_dose_amendment" class="form-label" title="Fertilization Dose Amendment (kg/ha)">
											Dose Amendment (kg/ha)</label>
										<input type="number" class="form-control" id="fert_dose_amendment" name="fertilization[dose_amendment]" min="0"
											placeholder="Fert. Dose Amendmentn" value="10000" />
									</div>

									<div class="col-md-2">
										<label for="fert_Nc_DM" class="form-label" title="Nc DM amendment">
											Nc DM amendment (%)</label>
										<input type="number" class="form-control" id="fert_Nc_DM" name="fertilization[Nc_DM]" min="0" step="0.01"
											placeholder="Nc DM amendment (%)" value="0.99" />
									</div>
									<div class="col-md-2">
										<label for="fert_DM_amendment" class="form-label" title="DM_amendment">
											DM_amendment (%)</label>
										<input type="number" class="form-control" id="fert_Nc_dm_amendment" name="fertilization[DM_amendment]" min="0"
											placeholder="DM amendment (%)" value="20" />
									</div>
									<div class="col-md-2">
										<label for="fert_frec_application" class="form-label" title="Frec. Application">
											Freq. Application</label>
											<select class="form-select" id="fert_frec_application" name="fertilization[frequent_application]">
												<option value="annual">Annual</option>
												<option value="biennal">Biennal</option>
											</select>
									</div>
									<div class="col-md-2">
										<label for="fert_application_method" class="form-label" title="Application method">
											Application method</label>
											<select class="form-select" id="fert_application_method" name="fertilization[application_method]">
												<option value="incorporated">Incorporated</option>
												<option value="beginning">Beginning</option>
											</select>
									</div>
								
								-->
							</div>
						</div>
								
								<div class="row">
									<div class="col-md-4">
										<br/>
										<button type="button" class="btn btn-primary" id="calculateNPKrequirements">
											<i class="fa fa-pagelines"></i> Calculate nutrient
											requirements
										</button>
									</div>
								</div>

							</div><!-- card-body -->
						</div> <!-- card-->
					</form>
				</div> <!-- card-body -->
			</div> <!-- card step1 -->
			<br />
			<!-- STEP 2 -->
			<div class="card d-none" id="step2">
				<div class="card-header">2.- Calculation of fertilizer requirements:</div>
				<div class="card-body">
					<section id="NBalanceInputsOutputs" class="d-none">
						<div class="row">
							<div class="col-md-12">
								<h3>Balance Inputs & Outputs:</h3>
								<div class="table-responsive">
									<table class="table table-info" id="tableBalanceIO">
										<thead>
											<tr>
												<th></th>
												<th></th>
												<th colspan="4">INPUTS terms (kg/ha)</th>
												<th colspan="5">OUTPUTS terms (kg/ha)</th>
											</tr>
										</thead>
										<thead>
											<tr>
												<th scope="col">#</th>
												<th scope="col">Crop</th>
												<th scope="col">Mineralization</th>
												<th scope="col">Fixation</th>
												<th scope="col">N water</th>
												<th scope="col">Nmin initial</th>
												<th scope="col">Leaching</th>
												<th scope="col">Uptake</th>
												<th scope="col">Desnitrification</th>
												<th scope="col">Nmin postharvest</th>
												<th scope="col">Estimated volatilization</th>
											</tr>
										</thead>
										<tbody></tbody>
									</table>
								</div>
							</div>
						</div>
					</section>
					<section id="NPKresults" class="d-none">
						<div class="row">
							<div class="col-md-12">
								<h3>Nutrient requirements:</h3>
								<div class="table-responsive">
									<table class="table table-info" id="tableNPKrequirements">
										<thead>
											<tr>
												<th scope="col">#</th>
												<th scope="col">Crop</th>
												<th scope="col">Yield (kg/ha)</th>
												<th scope="col">kg N/ha</th>
												<th scope="col">kg N/ha (20%)</th>
												<th scope="col">kg N/ha (80%)</th>
												<th scope="col">kg P/ha</th>
												<th scope="col">kg K/ha</th>
												<th scope="col">kg P2O5/ha</th>
												<th scope="col">kg K2O/ha</th>
											</tr>
										</thead>
										<tbody></tbody>
									</table>
								</div>
							</div>
						</div>
					</section>
					

					<form class="needs-validation" id="formFertilizersNavigatorF3" novalidate>
						<section id="sectionFertilizers" class="">
							<div class="row">
								<p>If the amount of fertilizer is empty, the system calculates it automatically </p>
								<div class="col-md-12">
									<div class="table-responsive">
										<table class="table table-light" id="tableFertilizerToApply">
											<thead>
												<tr>
													<th scope="col">#</th>
													<th scope="col"></th>
													<th scope="col">Fertilizer</th>
													<th scope="col">Amount (kg/ha)</th>
													<th scope="col">Application method</th>
													<th scope="col">Price €/kg</th>
													<th scope="col">Nitrogen (N) %</th>
													<th scope="col">Ureic Nitrogen (N_ure) %</th>
													<th scope="col">Phosphorus (P) %</th>
													<th scope="col">Potassium (K) %</th>
													<th scope="col">Sulfur (S)%</th>
												</tr>
											</thead>
											<tbody>
												<tr class="trow" data-row="0">
													<th scope="row">1</th>
													<td></td>
													<td>
														<select class="form-select" name="fertilizers[0][fertilizerID]" required
															onchange="onChangeFertilizer(this)">
															<option value="">Choose...</option>
														</select>
														<input type="hidden" class="form-control" name="fertilizers[0][fertilizer_name]"
															placeholder="" />
														<input type="hidden" class="form-control" name="fertilizers[0][fertilizer_key]"
															placeholder="" />
													</td>
													<td>
														<input type="number" class="form-control" name="fertilizers[0][amount]" min="0" step="any" title=""
															placeholder="Amount fertilizer kg/ha"/>
													</td>
													<td>
														<select class="form-select" name="fertilizers[0][application_method]">
															<option value="incorporated">Incorporated</option>
															<option value="beginning">Beginning</option>
														</select>
													</td>
													<td>
														<input type="number" class="form-control" name="fertilizers[0][price]" min="0" step="any"
															placeholder="Price fertilizer €/kg" value="0" />
													</td>

													<td>
														<input type="number" class="form-control" name="fertilizers[0][N_req]" min="0" step="any"
															placeholder="Nitrogen" value="0" />
													</td>
													<td>
														<input type="number" class="form-control" name="fertilizers[0][lim_N_ur]" min="0" step="any"
															placeholder="Ureic Nitrogen" value="0" />
													</td>

													<td>
														<input type="number" class="form-control" name="fertilizers[0][P_req]" min="0" step="any"
															placeholder="Phosphorus (P)" value="0" />
													</td>
													<td>
														<input type="number" class="form-control" name="fertilizers[0][K_req]" min="0" step="any"
															placeholder="Potassium (K)" value="0" />
													</td>
													<td>
														<input type="number" class="form-control" name="fertilizers[0][S_req]" min="0" step="any"
															placeholder="Sulfur (S)" value="0" />
													</td>
												</tr>
											</tbody>
											<tfoot>
												<tr>
													<td colspan="7">
														<button type="button" class="btn btn-success" id="addFertilizer">
															+ Add fertilizer
														</button>
														<button type="button" class="btn btn-primary" id="btnBestFertilizer">
															<i class="fa fa-flask"></i> I'm feeling lucky
															(Best fertilizers)
														</button>
													</td>
													<td colspan="2"></td>
												</tr>
											</tfoot>
										</table>
									</div>
								</div>
							</div>
						</section>
					</form>
				</div>
			</div>
			<br />
			<!-- STEP 3-->
			<div class="card d-none" id="step3">
				<div class="card-header">
					3.- Calculation of fertilizer requirements:
				</div>
				<div class="card-body" id="cardBodyStep3">



					<h3>External Nutrient requirements:</h3>
					<div class="table-responsive">
						<table class="table table-info" id="tableNutrientsRequirements">
							<thead>
								<tr>
									<th scope="col">#</th>
									<th scope="col">Crop</th>
									<th scope="col">Yield (kg/ha)</th>
									<th scope="col">kg N/ha</th>
									<th scope="col">kg N/ha (20%)</th>
									<th scope="col">kg N/ha (80%)</th>
									<th scope="col">kg P/ha</th>
									<th scope="col">kg K/ha</th>
									<th scope="col">kg P2O5/ha</th>
									<th scope="col">kg K2O/ha</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					</div>

					<h3> Fertilization </h3>
					<div class="table-responsive">
						<table class="table table-info" id="tableFertilization">
							<thead>
								<tr>
									<th scope="col">#</th>
									<th scope="col">Crop</th>
									<th scope="col">Fertilizer</th>
									<th scope="col">Amount (kg/ha)</th>
									<th scope="col">€/ha</th>
									<th scope="col">kg N/ha</th>
									<th scope="col">kg N_ureic/ha</th>
									<th scope="col">kg P/ha</th>
									<th scope="col">kg K/ha</th>
									<th scope="col">kg S/ha</th>
									<th scope="col">Volatilization (kg/ha)</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					</div>
					<!-- 
					<h3> Nitrogen Lossed </h3>
					<div class="table-responsive">
						<table class="table table-info" id="tableNLossed">
							<thead>
								<tr>
									<th scope="col">#</th>
									<th scope="col">Crop</th>
									<th scope="col">Acidification (kg/ha CO3Ca)</th>
									<th scope="col">Volatilization</th>
									<th scope="col">Desnitrification</th>
									<th scope="col">Leaching</th>
									<th scope="col">N lossed (kg/ha)</th>
									<th scope="col">N lossed (%)</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					</div>
					-->
				</div>
			</div>

			<div class="row d-none" id="stepLaunch">
				<div class="col-12 text-center">
					<button type="button" class="btn btn-primary btn-lg" id="btnLaunchF3">
						<i class="fa fa-play"></i> Launch NPK data
					</button>
				</div>
			</div>
		</div>
	</main>

	<footer class="footer mt-auto py-3 bg-light"></footer>

	<!-- JavaScript Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
	</script>
	<script src="https://brainfoolong.github.io/form-data-json/lib/form-data-json.min.js"></script>
	<script src="/js/form-navtool-f3.js"></script>
	<script src="/js/global-scripts.js"></script>
</body>

</html>