<!DOCTYPE html>
<html lang="en" class="h-100">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="" />
		<meta name="generator" content="" />
		<title>NAVIGATOR TOOL F4</title>
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous"/>
		<link href="../css/multiselect.css" rel="stylesheet"/>
		<link href="../css/product.css" rel="stylesheet" />
	</head>
	<body class="d-flex flex-column h-100">
		<navbar></navbar>
		<main class="flex-shrink-0">
			<div class="container-fluid pt-5">
				<div class="pt-3 text-center">
					<h2>F4 (nutrients)</h2>
					<p>This module allows to get both the nutrients requirements and the best fertilizer for them</p>
				</div>
				<form class="needs-validation" novalidate>
					<input required type="hidden" name="input[area]" />
					<input required type="hidden" name="input[comnbustible]" />
					<input required type="hidden" name="input[drain_rate]" />
					<input required type="hidden" name="input[consumption]" />
					<input required type="hidden" name="input[residues]" />
					<input required type="hidden" name="input[spread]" />
					<input required type="hidden" name="input[removed]" />
					<input required type="hidden" name="input[seeds]" />
					<input required type="hidden" name="input[herb]" />
					<input required type="hidden" name="input[fung]" />
					<input required type="hidden" name="input[insect]" />
					<input required type="hidden" name="input[otreat]" />
					<input required type="hidden" name="input[temp_reg]" />
					<input required type="hidden" name="input[moist_reg]" />
					<input required type="hidden" name="input[soil]" />
					<input required type="hidden" name="input[price]" />
					<input required type="hidden" name="input[price_water]" />
					<input required type="hidden" name="input[dose_irrigation]" />
					<input required type="hidden" name="input[price_seeds]" />
					<input required type="hidden" name="input[price_herb]" />
					<input required type="hidden" name="input[price_fung]" />
					<input required type="hidden" name="input[price_insect]" />
					<input required type="hidden" name="input[price_otreat]" />
					<div class="card">
						<h5 class="card-header bg-success text-white">Crop</h5>
						<div class="card-body">
							<div class="row">
								<div class="col-sm-6">
									<label for="crop_type" class="form-label">Plant common name</label>
									<input required type="hidden" name="input[crop_name]" />
									<select required class="form-select" id="crop_type" name="input[crop_type]"></select>
								</div>
								<div class="col-sm-6">
									<label for="yield" class="form-label">Yield (kg/ha)</label>
									<input required type="number" class="form-control" id="yield" name="input[yield]" min="0" value="10000" />
								</div>
							</div>
						</div>
					</div>
					<br/>
					<div class="card">
						<h5 class="card-header bg-info text-white">Plot</h5>
						<div class="card-body">
							<div class="row">
								<div class="col-sm-6">
									<label for="water_supply" class="form-label">Water supply</label>
									<select required class="form-select" id="water_supply" name="input[water_supply]">
										<option value="0">Rainfed</option>
										<option selected value="1">Irrigated</option>
									</select>								
								</div>
								<div class="col-sm-6">
									<label for="climatic_zone" class="form-label">Climatic zone&nbsp;&nbsp;</label>
									<a href="#" data-bs-toggle="modal" data-bs-target=".modal">
										<i class="fa fa-info"></i>
									</a>
									<select required class="form-select" id="climatic_zone" name="input[climatic_zone]">
										<option value="alpine">Alpine</option>
										<option selected value="atlantic">Atlantic</option>
										<option value="continental">Continental</option>
										<option value="northern">Northern </option>
										<option value="southern">Southern</option>
									</select>
									<div class="modal fade" tabindex="-1" aria-hidden="true">
										<div class="modal-dialog">
											<div class="modal-content">
												<img src="/img/climates.png" />
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<br/>
					<div class="card">
						<h5 class="card-header bg-danger text-white">Fertilizers</h5>
						<div class="card-body">
							<div class="row">
								<div class="col-sm-3">
									<label for="prices" class="form-label mt-2 pull-right">List of current prices:</label>
								</div>
								<div class="col-sm-5">
									<input class="form-control" id="prices" type="file" accept=".csv" />
								</div>
								<div class="col-sm-4">
									<a href="/csv/F3/Fertilizers.csv">Download default prices</a>
									<span>(used if you don't supply)<span>
								</div>
							</div>
							<div class="row mt-3">
								<div class="col-sm-3">
									<label for="fertilizers" class="form-label mt-2 pull-right">Select to include in list of best fertilizer:</label>
								</div>
								<div class="col-sm-9">
									<select class="form-select" id="fertilizers" name="fertilizers" multiple></select>
								</div>
							</div>
							<div class="row mt-3">
								<div class="col-sm-3">
									<label class="form-label mt-1 pull-right" title="Fertilizer that needs to be included in calculation (because the farmer has either applied it already or wants to apply it)">Fertilizer that needs to be included in calculation:</label>
								</div>
								<div class="col-sm-9">
									<ul class="list-unstyled">
										<li class="default">
											<span>None</span>
											<button class="btn fa fa-trash text-white"></button>
										</li>
									</ul>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-1 text-end">
									<button type="button" class="btn btn-dark">
										<i class="fa fa-plus"></i>
									</button>
								</div>
								<div class="col-sm-5">
									<select class="form-select" id="fertilizerID" name="fertilizerID">
										<option></option>
										<option value="custom">CUSTOM</option>
									</select>
								</div>
								<div class="col-sm-2">
									<select disabled class="form-select" name="type">
										<option value="Organic">Organic</option>
										<option value="Inorganic">Inorganic</option>
									</select>
								</div>
								<div class="col-sm-2">
									<select class="form-select" name="method">
										<option value="incorporated">Incorporated</option>
										<option value="topdressing">Top-dressing</option>
									</select>
								</div>
								<div class="col-sm-2">
									<select class="form-select" name="frequency">
										<option value="annual">Annual</option>
										<option value="biennial">Biennial</option>
									</select>
								</div>
							</div>
							<div class="row mt-2">
								<div class="offset-sm-1 col-sm-3">
									<input type="number" class="form-control" placeholder="Amount" id="amount" name="amount" min="0" />
									<label for="amount" class="form-label">kg/ha</label>
								</div>
								<div class="col-sm-4">
									<input type="number" class="form-control" placeholder="Price"  id="price" name="price" min="0" step="0.0001" />
									<label for="price" class="form-label">&euro;/t</label>
								</div>
								<div class="col-sm-1">
									<input disabled type="number" class="form-control" id="N" name="N" value="0" min="0" max="100" step="0.001" />
									<label for="N" class="form-label">% N</label>
								</div>
								<div class="col-sm-1">
									<input disabled type="number" class="form-control" id="N_ur" name="N_ur" value="0" min="0" max="100" step="0.001" />
									<label for="N_ur" class="form-label">% Ur</label>
								</div>
								<div class="col-sm-1">
									<input disabled type="number" class="form-control" id="P" name="P" value="0" min="0" max="100" step="0.001" />
									<label for="P" class="form-label">% P</label>
								</div>
								<div class="col-sm-1">
									<input disabled type="number" class="form-control" id="K" name="K" value="0" min="0" max="100" step="0.001" />
									<label for="K" class="form-label">% K</label>
								</div>
							</div>
						</div>
					</div>
					<br/>
					<div class="d-flex align-items-center justify-content-center">
						<div class="btn-group" role="group">
							<button type="button" class="btn btn-lg btn-warning">
								<i class="fa fa-play"></i> Nutrients
							</button>
							<a href="/GHG/l3-crops.html" class="btn btn-lg btn-secondary disabled">
								<i class="fa fa-chevron-right"></i> GHG
							</a>
							<a href="/EPA/l1.html" class="btn btn-lg btn-secondary disabled">
								<i class="fa fa-chevron-right"></i> EPA
							</a>
						</div>
					</div>
					<br/>
					<div class="d-none" id="results">
						<h3 class="text-center">Best fertilization</h3>
						<div class="table-responsive" id="fertilization">
							<table class="table table-warning text-end" id="F4-tabla-1">
								<thead>
									<tr>
										<th scope="col">Fertilizer</th>
										<th scope="col">Amount (kg/ha)</th>
										<th scope="col">Cost (€/ha)</th>
										<th scope="col">N (FU/ha)</th>
										<th scope="col">N_ureic (FU/ha)</th>
										<th scope="col">P (FU/ha)</th>
										<th scope="col">K (FU/ha)</th>
									</tr>
								</thead>
								<tbody></tbody>
							</table>
						</div>
						<h3 class="text-center">Nutrients balance</h3>
						<div class="row">
							<div class="col-sm-6" id="balance_input">
								<table class="table table-warning text-end" id="F4-tabla-2">
									<thead>
										<tr>
											<th></th>
											<th>N (FU/ha)</th>
											<th>P (FU/ha)</th>
											<th>K (FU/ha)</th>
											<th>P2O5 (FU/ha)</th>
											<th>K2O (FU/ha)</th>
										</tr>
									</thead>
									<tbody>
										<tr name="Nmineralization">
											<td>Mineralization</td>
										</tr>
										<tr name="Nfixation">
											<td>Fixation</td>
										</tr>
										<tr name="Nwater">
											<td>Irrigation</td>
										</tr>
										<tr name="NminInitial">
											<td>Initial of soil</td>
										</tr>
										<tr name="appliedFertilizer">
											<td>Fertilizer applied</td>
										</tr>
										<tr name="recommendedFertilizer">
											<td>Fertilizer recommended</td>
										</tr>
										<tr name="total" class="fs-5">
											<td>TOTAL INPUT</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="col-sm-6" id="balance_output">
								<table class="table table-warning text-end" id="F4-tabla-3">
									<thead>
										<tr>
											<th></th>
											<th>N (FU/ha)</th>
											<th>P (FU/ha)</th>
											<th>K (FU/ha)</th>
											<th>P2O5 (FU/ha)</th>
											<th>K2O (FU/ha)</th>
										</tr>
									</thead>
									<tbody>
										<tr name="Nleaching">
											<td>Leaching</td>
										</tr>
										<tr name="Uptake">
											<td>Uptake</td>
										</tr>
										<tr name="NminPostharvest">
											<td>End of soil</td>
										</tr>
										<tr name="Ndenitrification">
											<td>Denitrification</td>
										</tr>
										<tr name="Nvolatilization">
											<td>Volatilization</td>
										</tr>
										<tr>
											<td>&nbsp;</td>
										</tr>
										<tr name="total" class="fs-5">
											<td>TOTAL OUTPUT</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<!-- Botón de generación de pdf -->
						<div style="text-align: center;">
							<button type="button" class="btn btn-lg btn-warning" onclick="getPDF('F4', true)">
								Generate PDF output
							</button>
						</div>
						<!-- Botón de generación de pdf -->
					</div>
				</form>
				
			</div>
		</main>
		<footer class="footer mt-auto py-3 bg-light"></footer>
		<script src="/lib/bootstrap.bundle.min.js"></script>
		<script src="/lib/form-data-json.min.js"></script>
		<script src="/lib/multiselect.min.js"></script>
		<script src="/js/form-f4.js"></script>
		<script src="/js/global-scripts.js"></script>
		<!-- Generación de PDF -->
		<script src="/lib/pdf/jspdf.umd.js"></script>
    	<script>if (!window.jsPDF) window.jsPDF = window.jspdf.jsPDF</script>
    	<script src="/lib/pdf/calibri-normal.js"></script>
    	<script src="/lib/pdf/jspdf.plugin.autotable.js"></script>
		<script src="/js/templates_pdf/funcionalidad_pdf.js"></script>
		<script src="/js/templates_pdf/header_footer.js"></script>
		<script src="/js/templates_pdf/F4_pdf.js"></script>
	</body>
</html>
